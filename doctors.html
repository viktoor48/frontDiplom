<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="doctors.css">
    <title>Doctors</title>
</head>

<body>
  <div class="wrapper">
    <header class="header-wrapper">
      <div class="container">
        <div class="header">
          <div class="header__row">
            <div class="header__column">
              <div class="header__location">
                Липецк
              </div>
            </div>
            <div class="header__column">
              <div class="header__logo">
                <img src="images/logo.svg" alt="">
              </div>
            </div>
            <div class="header__column">
              <nav class="header__menu">
                <ul class="user-nav">
                  <li class="user-nav__item" id="link-enter" >
                    <a class="user-nav__link button" href="#">
                      Войти
                    </a>
                    <div class="form-popup" id="myForm">
                      <form action="#" class="form-container">
                        <div class="choose-login">
                          <h3 class="title">Пациент</h3>
                          <div class="subtitle">
                            Делитесь отзывами о врачах, записывайтесь на приём онлайн
                          </div>
                          <button class="button button-blue">
                            <a href="#">Войти</a>
                          </button>
                        </div>
                        <div class="choose-login">
                          <h3 class="title">Врач или клиника</h3>
                          <div class="subtitle">
                            Просматривайте свои записи, рассказывайте о ваших услугах
                          </div>
                          <button class="button button-blue">
                            <a href="#">Войти</a>
                          </button>
                        </div>
                      </form>
                    </div>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
      <div class="search-wrapper">
        <div class="container">
          <div class="search">
            <div class="search__row">
              <div class="search__input-wrapper">
                <input class="search__input" type="search" placeholder="Врачи, клиники, услуги">
              </div>
              <button class="search__button b-button-red">Найти</button>
            </div>
          </div>
        </div>
      </div>
    </header>
    <main class="main-wrapper">
      <div class="container">
        <div class="card-doctor__container">
          <div class="card-doctor">
            <div class="card-doctor__row">
              <div class="card-doctor__avatar">
                <div class="card-doctor__profile">
                  <div class="card-doctor__img-wrapper">
                    <div class="card-doctor__favorite-wrapper">
                      <div class="card-doctor__favorite-icon"></div>
                    </div>
                    <img src="images/avatarDoctor.png" alt="">
                  </div>
                  <div class="card-doctor__stars-container">
                    <div class="rating-result">
                      <span class="active"></span>
                      <span class="active"></span>
                      <span class="active"></span>
                      <span class="active"></span>
                      <span></span>
                    </div>
                  </div>
                  <a href="#" class="card-doctor__link-review">
                    27&nbsp;отзывов
                  </a>
                </div>
              </div>
              <div class="card-doctor__main-content">
                <div class="card-doctor__info">
                  <div class="card-doctor__name">
                    <a href="#" class="card-doctor__name-link">Молчанова Валентина Ивановна</a>
                  </div>
                  <div class="card-doctor__spec">Гинеколог, акушер, врач УЗИ</div>
                  <div class="card-doctor__experience">Стаж 16 лет</div>
                  <div class="card-doctor__appointment-wrapper">
                    <div class="card-doctor__appointment-item">
                      <div class="card-doctor__appointment-icon">
                        <img src="images/icon-clinic.svg" class="appointment__icon" alt="">
                      </div>
                      <div class="card-doctor__appointment-text">В клинике</div>
                      <div class="card-doctor__appointment-price">от&nbsp;800&nbsp;₽</div>
                    </div>
                  </div>
                  <div class="card-doctor__phone-container">
                    <div class="card-doctor__phone-title">Запись на приём:</div>
                    <div class="card-doctor__phone">
                      <div class="card-doctor__phone-icon"></div>
                      <div class="card-doctor__phone-num">(4742) 52-26-07</div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card-doctor__appointment">
                <div class="time-quantums-container">
                  <div class="time-quantums-navigation">
                    <button class="time-quantum-nav-button time-quantum-nav-back">&#8249;</button>
                    <div class="time-quantum-nav-week">1-7 декабря</div>
                    <button class="time-quantum-nav-button time-quantum-nav-forward">&#8250;</button>
                  </div>
                  <div class="time-quantums-days">
                    <div class="time-quantum-day active">Пн</div>
                    <div class="time-quantum-day">Вт</div>
                    <div class="time-quantum-day">Ср</div>
                    <div class="time-quantum-day">Чт</div>
                    <div class="time-quantum-day">Пт</div>
                    <div class="time-quantum-day">Сб</div>
                    <div class="time-quantum-day">Вс</div>
                  </div>
                  <div class="time-quantums-slots">
                    <div class="time-quantum-slot">
                      <div class="time-quantum-slot-time">8:00-10:00</div>
                    </div>
                    <div class="time-quantum-slot">
                      <div class="time-quantum-slot-time">8:00-10:00</div>
                    </div>
                    <div class="time-quantum-slot">
                      <div class="time-quantum-slot-time">8:00-10:00</div>
                    </div>
                    <div class="time-quantum-slot">
                      <div class="time-quantum-slot-time">8:00-10:00</div>
                    </div>
                    <div class="time-quantum-slot">
                      <div class="time-quantum-slot-time">10:00-12:00</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-doctor">
            <div class="card-doctor__row">
              <div class="card-doctor__avatar">
                <div class="card-doctor__profile">
                  <div class="card-doctor__img-wrapper">
                    <div class="card-doctor__favorite-wrapper active">
                      <div class="card-doctor__favorite-icon"></div>
                    </div>
                    <img src="images/avatarDoctor.png" alt="">
                  </div>
                  <div class="card-doctor__stars-container">
                    <div class="rating-result">
                      <span class="active"></span>
                      <span class="active"></span>
                      <span class="active"></span>
                      <span class="active"></span>
                      <span></span>
                    </div>
                  </div>
                  <a href="#" class="card-doctor__link-review">
                    27&nbsp;отзывов
                  </a>
                </div>
              </div>
              <div class="card-doctor__main-content">
                <div class="card-doctor__info">
                  <div class="card-doctor__name">
                    <a href="#" class="card-doctor__name-link">Молчанова Валентина Ивановна</a>
                  </div>
                  <div class="card-doctor__spec">Гинеколог, акушер, врач УЗИ</div>
                  <div class="card-doctor__experience">Стаж 16 лет</div>
                  <div class="card-doctor__appointment-wrapper">
                    <div class="card-doctor__appointment-item">
                      <div class="card-doctor__appointment-icon">
                        <img src="images/icon-clinic.svg" class="appointment__icon" alt="">
                      </div>
                      <div class="card-doctor__appointment-text">В клинике</div>
                      <div class="card-doctor__appointment-price">от&nbsp;800&nbsp;₽</div>
                    </div>
                  </div>
                  <div class="card-doctor__phone-container">
                    <div class="card-doctor__phone-title">Запись на приём:</div>
                    <div class="card-doctor__phone">
                      <div class="card-doctor__phone-icon"></div>
                      <div class="card-doctor__phone-num">(4742) 52-26-07</div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card-doctor__appointment">
                <div class="time-quantums-container">
                  <div class="time-quantums-navigation">
                    <button class="time-quantum-nav-button time-quantum-nav-back">&#8249;</button>
                    <div class="time-quantum-nav-week">1-7 декабря</div>
                    <button class="time-quantum-nav-button time-quantum-nav-forward">&#8250;</button>
                  </div>
                  <div class="time-quantums-days">
                    <div class="time-quantum-day">Пн</div>
                    <div class="time-quantum-day active">Вт</div>
                    <div class="time-quantum-day">Ср</div>
                    <div class="time-quantum-day">Чт</div>
                    <div class="time-quantum-day">Пт</div>
                    <div class="time-quantum-day">Сб</div>
                    <div class="time-quantum-day">Вс</div>
                  </div>
                  <div class="time-quantums-slots">
                    <div class="time-quantum-slot">
                      <div class="time-quantum-slot-time">8:00-10:00</div>
                    </div>
                    <div class="time-quantum-slot">
                      <div class="time-quantum-slot-time">10:00-12:00</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer class="footer-wrapper">
      <div class="container">
        <div class="footer-row">
          <div class="footer-logo">
            <img src="images/logo.svg" alt="">
          </div>
        </div>
      </div>
    </footer>
  </div>
<script>
  let date = new Date();

  let currentDay = new Map([
    [1,  'Пн'],
    [2,  'Вт'],
    [3,  'Ср'],
    [4,  'Чт'],
    [5,  'Пт'],
    [6,  'Сб'],
    [0,  'Вс'],
  ]);

  const availableSlots = [
    { day: 'Пн', time: '8:00-8:15', booked: false },
    { day: 'Вт', time: '10:00-10:15', booked: false },
    { day: 'Ср', time: '14:00-14:15', booked: false },
    { day: 'Чт', time: '9:00-9:15', booked: false },
    { day: 'Пт', time: '16:00-16:15', booked: false },
    { day: 'Сб', time: '13:00-13:15', booked: false },
    { day: 'Вс', time: '11:00-11:15', booked: false },
    { day: 'Пн', time: '15:00-15:15', booked: false },
  ];

  const WEEK_LENGTH = 7;
  let currentWeekIndex = 0;

  const weekNavigation = document.querySelector('.time-quantum-nav-week');
  const backNavButton = document.querySelector('.time-quantum-nav-back');
  const forwardNavButton = document.querySelector('.time-quantum-nav-forward');
  const daysOfWeek = document.querySelectorAll('.time-quantum-day');
  const timeSlots = document.querySelector('.time-quantums-slots');

  //функция для определения сегодняшнего дня
  function searchCurrentDay() {
    daysOfWeek.forEach((day => {
      if (day.textContent === currentDay.get(date.getDay())) {
        addActiveClass(day);
      }
    }));
  }

  function addActiveClass(element) {
    element.classList.add('active');
  }

  function removeActiveClass(element) {
    element.classList.remove('active');
  }

  // Функция для обновления списка доступных слотов времени
  function updateSlots() {
    // Получаем текущую неделю
    const currentWeek = availableSlots.slice(currentWeekIndex * WEEK_LENGTH, (currentWeekIndex + 1) * WEEK_LENGTH);

    // Очищаем список слотов времени
    timeSlots.innerHTML = '';

    // Для каждого доступного слота времени создаем элемент и добавляем его в список
    currentWeek.forEach(slot => {
      const slotEl = document.createElement('div');
      slotEl.className = 'time-quantum-slot';
      slotEl.innerHTML = `
      <div class="time-quantum-slot-time">${slot.time}</div>
    `;
      timeSlots.appendChild(slotEl);
    });
  }

  // Функция для обновления выбранной недели
  function updateCurrentWeek() {
    weekNavigation.textContent = getWeekRange();
  }

  // Функция для получения диапазона дней выбранной недели
  function getWeekRange() {
    const start = currentWeekIndex * WEEK_LENGTH + 1;
    const end = start + WEEK_LENGTH - 1;
    return `${start}-${end} декабря`;
  }

  // Функция для обновления стилей выбранного дня недели
  function updateSelectedDay() {
    const selectedDay = document.querySelector('.time-quantum-day.selected');
    if (selectedDay) {
      selectedDay.classList.remove('selected');
    }
    daysOfWeek[currentDayIndex()].classList.add('selected');
  }

  // Функция для получения индекса выбранного дня недели
  function currentDayIndex() {
    const today = new Date().getDay();
    return today === 0 ? WEEK_LENGTH - 1 : today - 1;
  }

  // Обработчик события для кнопки "Назад"
  backNavButton.addEventListener('click', () => {
    currentWeekIndex = Math.max(currentWeekIndex, 1);
    updateCurrentWeek();
    updateSelectedDay();
    updateSlots();
  });

  // Обработчик события для кнопки "Вперед"
  forwardNavButton.addEventListener('click', () => {
    const maxWeekIndex = Math.ceil(availableSlots.length / WEEK_LENGTH) - 1;
    currentWeekIndex = Math.min(currentWeekIndex + 1, maxWeekIndex);
    updateCurrentWeek();
    updateSlots();
  });

  // Инициализация компонента
   //updateCurrentWeek();
  // updateSlots();
  // updateSelectedDay();

  // Добавляем обработчик событий для выбора дня недели
  daysOfWeek.forEach((day, index) => {
    day.addEventListener('click', () => {
      const selectedDay = document.querySelector('.time-quantum-day.selected');
      if (selectedDay) {
        selectedDay.classList.remove('selected');
      }
      day.classList.add('selected');
      updateSelectedDay();
    });
  });

  //инициализация компонента
  function init() {
    searchCurrentDay();
  }

  //init();

</script>
</body>
</html>